<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <input type="text" name="userInput"/>
    <button type="button" onclick="appendDeleteActions(document.body.children.userInput.value)">Add</button>
    <button type="button" onclick="objectExtract()">Submit</button>
    <script>
        async function myFunction()
        {
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            //var raw = JSON.stringify({"message":"down"});

            var requestOptions = {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
            };
            //the API returns response with header of 200 if the url ends with up only otherwise it send a response of 400 
            try {
                let response = await fetch("http://localhost:300/test/"+document.body.children.userInput.value, requestOptions)
                //console.log (response.status);
                
                switch (response.status)
                {
                    case 200: {
                        let data = await response.json();
                        console.log({status:200, message:data.message})
                        break;
                    }
                    case 400:{
                        let data = await response.json();
                        console.log({status: 400, message:data.errorMessage})
                        break;
                    }
                }
            }
            catch(err)
            {
                console.log('Error' + err)
            }
            
            
        }

        function myFunction_async()
        {
            var myHeaders = new Headers();
            myHeaders.append("Content-Type", "application/json");

            var raw = JSON.stringify({"message":"down"});

            var requestOptions = {
            method: 'GET',
            headers: myHeaders,
            redirect: 'follow'
            };
            var errorFlag = false
            fetch("http://localhost:3000/test/"+document.body.children.userInput.value, requestOptions)
                .then(response=>{
                    console.log(response.status + ': ' + response.statusText)
                    if (response.status!==600)
                        return response.text();
                    else
                        {errorFlag=true;
                        return response.text(); }
                })
                .then(data=>{
                    if(!errorFlag)
                    console.log ('No Error ' + data)
                    else
                    throw (data)
                })
                .catch((error)=>{
                    console.log('Error, Error!\n')
                    console.log(error)
                })
        }

        let frmData = new FormData();
        
        function appendDeleteActions (value)
        
        {
            //let value = document.body.children.userInput.value;
            frmData.append('removeImg', value);
            displayFormData();    
        }
        
        function displayFormData()
        {
            console.log (frmData.getAll('removeImg'))
        }

        function submit()
        {
            let imgName= document.body.children.userInput.value;
            frmData.append('imgName',imgName);
            console.log (frmData.getAll(imgName));
            var requestOptions = {
            method: 'POST',
            body: frmData,
            redirect: 'follow'
            };

            fetch("http://localhost:3000/test", requestOptions)
            .then(response => response.json())
            .then(result => console.log(result))
            .catch(error => console.log('error', error));
        }

        function objectExtract ()
        {
            let originalObject = {
                name: 'I am Object 1',
                message: 'Hello from Object 1',
                origin: 'Windows PC',
                distance: 200
            }

            let {age, name, message, ...remaining} = originalObject;
            console.log(name); //prints I am Object 1
            console.log(message); //prints Hello from Object 1
            console.log(remaining);// prints {origin: "Windows PC", distance: 200}
            console.log(age);// prints undefined
        }

        for (const [i, v] of ['a', 'b', 'c'].entries()) {
            console.log(i, v)
        }
    </script>
</body>
</html>